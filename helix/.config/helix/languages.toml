# ============================================================================
# FICHIER DE CONFIGURATION DES LANGAGES: ~/.config/helix/languages.toml
# ============================================================================

# Configuration des serveurs de langage
[language-server.nil]
command = "nil"

[language-server.rust-analyzer]
command = "rust-analyzer"

[language-server.rust-analyzer.config.rust-analyzer]
checkOnSave.command = "clippy"
cargo.features = "all"

[language-server.pylsp]
command = "pylsp"

[language-server.typescript-language-server]
command = "typescript-language-server"
args = ["--stdio"]

[language-server.vscode-json-language-server]
command = "vscode-json-language-server"
args = ["--stdio"]

[language-server.vscode-html-language-server]
command = "vscode-html-language-server"
args = ["--stdio"]

[language-server.vscode-css-language-server]
command = "vscode-css-language-server"
args = ["--stdio"]

[language-server.lua-language-server]
command = "lua-language-server"

[language-server.gopls]
command = "gopls"

[language-server.yaml-language-server]
command = "yaml-language-server"
args = ["--stdio"]

[language-server.marksman]
command = "marksman"
args = ["server"]

# Configuration des langages
[[language]]
name = "nix"
scope = "source.nix"
injection-regex = "nix"
file-types = ["nix"]
shebangs = []
comment-token = "#"
indent = { tab-width = 2, unit = "  " }
language-servers = ["nil"]
auto-format = true
formatter = { command = "alejandra", args = ["-q"] }

[[language]]
name = "rust"
scope = "source.rust"
injection-regex = "rust"
file-types = ["rs"]
roots = ["Cargo.toml", "Cargo.lock"]
auto-format = true
comment-token = "//"
language-servers = ["rust-analyzer"]
indent = { tab-width = 4, unit = "    " }
formatter = { command = "rustfmt", args = ["--edition", "2021"] }

[[language]]
name = "python"
scope = "source.python"
injection-regex = "python"
file-types = ["py", "pyi", "py3", "pyw", "ptl"]
shebangs = ["python"]
roots = ["pyproject.toml", "setup.py", "requirements.txt"]
comment-token = "#"
language-servers = ["pylsp"]
indent = { tab-width = 4, unit = "    " }
auto-format = true
formatter = { command = "black", args = ["--quiet", "-"] }

[[language]]
name = "javascript"
scope = "source.js"
injection-regex = "(js|javascript)"
file-types = ["js", "mjs", "cjs", "jsx"]
shebangs = ["node"]
comment-token = "//"
language-servers = ["typescript-language-server"]
indent = { tab-width = 2, unit = "  " }
auto-format = true
formatter = { command = "prettier", args = ["--parser", "typescript"] }

[[language]]
name = "typescript"
scope = "source.ts"
injection-regex = "(ts|typescript)"
file-types = ["ts", "tsx"]
shebangs = []
comment-token = "//"
language-servers = ["typescript-language-server"]
indent = { tab-width = 2, unit = "  " }
auto-format = true
formatter = { command = "prettier", args = ["--parser", "typescript"] }

[[language]]
name = "json"
scope = "source.json"
injection-regex = "json"
file-types = ["json", "jsonc"]
language-servers = ["vscode-json-language-server"]
indent = { tab-width = 2, unit = "  " }
auto-format = true
formatter = { command = "prettier", args = ["--parser", "json"] }

[[language]]
name = "html"
scope = "text.html.basic"
injection-regex = "html"
file-types = ["html", "htm"]
language-servers = ["vscode-html-language-server"]
indent = { tab-width = 2, unit = "  " }
auto-format = true
formatter = { command = "prettier", args = ["--parser", "html"] }

[[language]]
name = "css"
scope = "source.css"
injection-regex = "css"
file-types = ["css", "scss"]
language-servers = ["vscode-css-language-server"]
indent = { tab-width = 2, unit = "  " }
auto-format = true
formatter = { command = "prettier", args = ["--parser", "css"] }

[[language]]
name = "bash"
scope = "source.bash"
injection-regex = "(shell|bash|zsh|sh)"
file-types = ["sh", "bash", "zsh"]
shebangs = ["sh", "bash", "zsh"]
comment-token = "#"
indent = { tab-width = 2, unit = "  " }
auto-format = true
formatter = { command = "shfmt", args = ["-i", "2"] }

[[language]]
name = "lua"
scope = "source.lua"
injection-regex = "lua"
file-types = ["lua"]
comment-token = "--"
indent = { tab-width = 2, unit = "  " }
language-servers = ["lua-language-server"]
auto-format = true
formatter = { command = "stylua", args = ["-"] }

[[language]]
name = "go"
scope = "source.go"
injection-regex = "go"
file-types = ["go"]
roots = ["go.mod", "go.sum"]
comment-token = "//"
language-servers = ["gopls"]
indent = { tab-width = 4, unit = "\t" }
auto-format = true

[[language]]
name = "yaml"
scope = "source.yaml"
file-types = ["yml", "yaml"]
comment-token = "#"
indent = { tab-width = 2, unit = "  " }
language-servers = ["yaml-language-server"]

[[language]]
name = "markdown"
scope = "source.md"
injection-regex = "md|markdown"
file-types = ["md", "markdown"]
language-servers = ["marksman"]
indent = { tab-width = 2, unit = "  " }
auto-format = true
soft-wrap.enable = true

[[language]]
name = "toml"
scope = "source.toml"
injection-regex = "toml"
file-types = ["toml"]
comment-token = "#"
indent = { tab-width = 2, unit = "  " }

[[language]]
name = "c"
scope = "source.c"
injection-regex = "c"
file-types = ["c", "h"]
comment-token = "//"
indent = { tab-width = 4, unit = "    " }

[[language]]
name = "cpp"
scope = "source.cpp"
injection-regex = "cpp"
file-types = ["cpp", "cc", "cxx", "hpp", "hh", "hxx"]
comment-token = "//"
indent = { tab-width = 4, unit = "    " }
